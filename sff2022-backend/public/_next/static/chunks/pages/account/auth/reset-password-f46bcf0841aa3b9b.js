(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{2339:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/auth/reset-password",function(){return c(9547)}])},9547:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return t}});var d=c(1351),e=c(5893),f=c(3859),g=c(7294),h=c(1163),i=c(6245),j=c(9280),k=c(5746),l=c(5808),m=c(7137),n=c(1889),o=c(9669),p=c.n(o),q=function(a){var b=a.setstaus,c=(0,h.useRouter)().query,d=(0,g.useState)(!1),i=d[0],o=d[1],q=function(a){var d=a.password,e=""===location.port?location.protocol+"//"+location.host:"http://"+location.hostname+":5000",f={method:"POST",url:"".concat(e,"/api/auth/reset-password"),headers:{"x-token":"".concat(c.token)},data:{newPassword:d}};console.log(f),p().request(f).then(function(a){o(!0)}).catch(function(a){b("no-authorized")})},r=function(a){console.log("Failed:",a)};return(0,e.jsx)(e.Fragment,{children:i?(0,e.jsx)(f.ZP,{status:"success",title:"Su correo se ha cambiado exitosamente",subTitle:"Ya puede iniciar sesi\xf3n en la aplicaci\xf3n con su nueva contrase\xf1a"}):(0,e.jsxs)("div",{className:"reset-password_container",children:[(0,e.jsxs)("div",{className:"reset-password_img_container",children:[(0,e.jsx)("h1",{children:"Cambiar mi contrase\xf1a"}),(0,e.jsx)(j.Z,{alt:"reset password",className:"reset-password_img",preview:!1,src:"/assets/img/laptop_illustration.png"})]}),(0,e.jsx)(k.Z,{sm:3}),(0,e.jsx)(k.Z,{sm:18,children:(0,e.jsxs)(l.Z,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:q,onFinishFailed:r,autoComplete:"off",children:[(0,e.jsx)(l.Z.Item,{label:"Contrase\xf1a",name:"password",rules:[{required:!0,message:"Por favor ingresa tu contrase\xf1a!"},{required:!0,min:6,message:"La contrase\xf1a debe ser de almenos 6 caracteres"}],children:(0,e.jsx)(m.Z.Password,{})}),(0,e.jsx)(l.Z.Item,{label:"Repetir Contrase\xf1a",name:"passwordConfirm",rules:[{required:!0,message:"Por favor confirmaa tu contrase\xf1a"},function(a){var b=a.getFieldValue;return{validator:function(a,c){return c&&b("password")!==c?Promise.reject(Error("Las contrase\xf1as no coinciden")):Promise.resolve()}}}],children:(0,e.jsx)(m.Z.Password,{})}),(0,e.jsx)(l.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(n.Z,{type:"primary",htmlType:"submit",children:"Cambiar mi contrase\xf1a"})})]})}),(0,e.jsx)(k.Z,{sm:3})]})})},r=c(1382),s=function(){return(0,e.jsx)("div",{className:"loading-container",children:(0,e.jsx)(r.Z,{size:"large"})})};function t(a){var a=null!==a?a:(0,d.Z)(TypeError("Cannot destructure undefined")),b=(0,h.useRouter)().query,c=(0,g.useState)("checking"),j=c[0],k=c[1];return(0,g.useEffect)(function(){if(b)try{console.log(b.token);var a=(0,i.Z)("".concat(b.token));if(a.exp){var c=new Date(1e3*a.exp),d=new Date;c>d?k("authorized"):k("no-authorized")}else k("no-authorized")}catch(e){k("no-authorized")}},[b]),(0,e.jsx)(e.Fragment,{children:"checking"===j?(0,e.jsx)(s,{}):"authorized"===j?(0,e.jsx)(q,{setstaus:k}):(0,e.jsx)(f.ZP,{status:"error",title:"Al parecer ocurri\xf3 un error",subTitle:"Posiblemente el periodo para realizar el cambio de contrase\xf1a ha caducado. Vuelva a repetir el proceso y de no poder acceder, contacte a un administrador"})})}}},function(a){a.O(0,[118,280,810,294,774,888,179],function(){var b;return a(a.s=2339)}),_N_E=a.O()}])